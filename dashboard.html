<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Jolt API Tester</title>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; padding: 2rem; max-width: 800px; margin: 0 auto; }
        .card { 
            border: 1px solid #e0e0e0; 
            padding: 15px; 
            margin-bottom: 10px; 
            border-radius: 8px; 
            background-color: #fcfcfc;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }
        .error { color: #d32f2f; background: #ffebee; padding: 10px; border-radius: 4px; }
        button { background: #0056b3; color: white; border: none; padding: 10px 20px; border-radius: 4px; cursor: pointer; font-size: 16px; }
        button:hover { background: #004494; }
    </style>
</head>
<body>

    <h1>Jolt Locations</h1>
    <p>Status: <span id="status">Ready to fetch</span></p>
    <button onclick="fetchJoltData()">Fetch Locations</button>
    
    <div id="results" style="margin-top: 20px;"></div>

    <script>
        // --- CONFIGURATION ---
        const ENDPOINT = "https://api.jolt.com/graphql";
        
        // Note: We are passing the token in the headers. 
        // Jolt typically uses standard Authorization or custom headers.
        const HEADERS = {
            "Content-Type": "application/json",
            "Authorization": "__775aea000eec4f5d945926919036a2ae", // Your Token
            "X-Jolt-Company-Id": "0005875b260d4c6a9c965f4e5e59b569" // Company ID (Added as header just in case)
        };

        // --- THE QUERY ---
        // Using the "Relay Connection" pattern found in your schema
        const QUERY = `
            query {
                locations(first: 10) {
                    edges {
                        node {
                            id
                            name
                        }
                    }
                }
            }
        `;

        async function fetchJoltData() {
            const resultsDiv = document.getElementById('results');
            const statusSpan = document.getElementById('status');
            
            statusSpan.textContent = "Loading...";
            resultsDiv.innerHTML = "";

            try {
                const response = await fetch(ENDPOINT, {
                    method: "POST",
                    headers: HEADERS,
                    body: JSON.stringify({ query: QUERY })
                });

                const json = await response.json();

                // Check for GraphQL errors
                if (json.errors) {
                    console.error("GraphQL Errors:", json.errors);
                    resultsDiv.innerHTML = `<div class="error">API Error: ${json.errors[0].message}</div>`;
                    statusSpan.textContent = "Failed";
                    return;
                }

                // Render Data
                const edges = json.data.locations.edges;
                
                if (edges.length === 0) {
                    resultsDiv.innerHTML = "<p>No locations found.</p>";
                } else {
                    edges.forEach(edge => {
                        const loc = edge.node;
                        const card = document.createElement('div');
                        card.className = 'card';
                        card.innerHTML = `<strong>${loc.name}</strong><br><small>ID: ${loc.id}</small>`;
                        resultsDiv.appendChild(card);
                    });
                }
                statusSpan.textContent = "Success";

            } catch (error) {
                console.error("Network/CORS Error:", error);
                resultsDiv.innerHTML = `<div class="error"><strong>Connection Failed.</strong><br>Check your browser console (F12).<br>If you see a CORS error, the Jolt API blocks browser-based requests.</div>`;
                statusSpan.textContent = "Error";
            }
        }
    </script>
</body>
</html>